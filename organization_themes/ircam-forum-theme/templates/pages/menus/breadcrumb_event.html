{% load i18n pages_tags organization_tags event_tags %}

{% for page in page_branch %}
    {% if not has_home and page.is_primary and forloop.first %}
        <li class="breadcrumb__item" id="breadcrumb-menu-home">
            <a class="breadcrumb__link" href="{% url "home" %}">{% trans "Home" %}</a>
        </li>
    {% endif %}
    {% if page.is_current_or_ascendant %}
        {% if page.is_current %}
            <li class="breadcrumb__item" id="breadcrumb-menu-{{ page.html_id }}"
                class="active">{{ page.title }}</li>
        {% elif not page.is_primary %}
            <li class="breadcrumb__item" id="breadcrumb-menu-{{ page.html_id }}">
                <a class="breadcrumb__link" href="{{ page.get_absolute_url }}">{{ page.title }}</a>
            </li>
        {% endif %}
        {% if page.has_children %}
            {% if tag and tag|tag_is_excluded %}
                <li class="breadcrumb__item" id="breadcrumb-menu-{{ page.html_id }}">
                    {{ tag }}
                </li>
            {% else %}
                {% page_menu page %}
            {% endif %}
        {% endif %}
    {% endif %}
{% endfor %}
